(this["webpackJsonpmini-feeder"]=this["webpackJsonpmini-feeder"]||[]).push([[0],{105:function(t,e){},107:function(t,e){},147:function(t,e,n){},152:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"device",(function(){return m})),n.d(r,"feed",(function(){return x}));var u=n(26),a=n(14),c=n(15),i=n(0),s=n(60),o=n.n(s),p=n(84),f=n(89),l=n(22),b=[{component:Object(i.lazy)((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,212))})),routes:[{path:"/",component:Object(i.lazy)((function(){return Promise.all([n.e(6),n.e(5)]).then(n.bind(null,211))}))}]}],d=document.documentElement;function v(){var t=16,e=d.getBoundingClientRect().width,n="";return"mobile"===(n=e<768?"mobile":e>=768&&e<=1024?"pad":"pc")&&(t=d.getBoundingClientRect().width/375*10),d.setAttribute("data-device",n),d.style.fontSize=t+"px",{name:n,rem:t}}var h=n(59),m=Object(l.a)("device",Object(a.a)({},v()),(function(t,e){switch(e.type){case"change":return Object(a.a)(Object(a.a)({},t),{},{name:e.name})}})),x=Object(l.a)("feed",{url:""},(function(t,e){switch(e.type){case"select":return Object(a.a)(Object(a.a)({},t),{},{url:e.url})}})),g=(n(147),function(){var t=Object(l.b)("device"),e=Object(c.a)(t,2)[1],n=Object(i.useCallback)((function(){e(Object(a.a)({type:"change"},v()))}),[e]);return Object(i.useEffect)((function(){return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[n]),Object(u.jsx)(f.a,{children:Object(u.jsx)(i.Suspense,{fallback:null,children:Object(p.a)(b,{gists:h})})})});o.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))},59:function(t,e,n){"use strict";n.r(e),n.d(e,"goAuth",(function(){return k})),n.d(e,"getToken",(function(){return y})),n.d(e,"getRssSaved",(function(){return C})),n.d(e,"addRssSaved",(function(){return E})),n.d(e,"editRssSaved",(function(){return T})),n.d(e,"removeRss",(function(){return A})),n.d(e,"getRssDetail",(function(){return J})),n.d(e,"editSystemConfig",(function(){return R})),n.d(e,"getSystemConfig",(function(){return q}));var r=n(10),u=n(1),a=n.n(u),c=n(5),i=n(58),s=n(15),o=n(55),p=n.n(o),f={isAsync:!0,header:{"Content-Type":"json",Accept:"json"},timeout:1e4,withCredentials:!0,convert:function(t){try{return JSON.parse(t)}catch(e){return t}},autoAbort:!0,host:"https://github.com/"};p.a.config(f);var l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=p()(t,e,n);return{send:function(t){return Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.send(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))()}}},b=n(85),d=n.n(b),v=function(t){var e={};return"?"===(t=t.trim())[0]&&(t=t.slice(1)),t.split("&").forEach((function(t){var n=t.split("="),r=Object(s.a)(n,2),u=r[0],a=r[1];u&&(e[u]=a)})),e}(window.location.search).code,h="19194338bc489f26c18e",m="239d0e85b37a96446738ab6957cdc60c55deb14c",x="b54d474913a4f2149b9f96099b39474d",g="rss.json",j="system.json",w=new d.a,O=null,k=function(){sessionStorage.removeItem("token"),window.location.href="https://github.com/login/oauth/authorize?client_id=".concat(h,"&redirect_uri=").concat("https://yuchenli923.github.io/mini-feeder/build","&scope=gist")};function y(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=sessionStorage.getItem("token"))){t.next=4;break}return O=new i.a({auth:e}),t.abrupt("return",e);case 4:return t.next=6,l("/login/oauth/access_token","get",{query:{client_id:h,code:v,client_secret:m,scope:"gist"}}).send();case 6:return n=t.sent,(r=n.access_token)?(sessionStorage.setItem("token",r),O=new i.a({auth:e})):k(),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}v||k();var C=function(){var t=Object(c.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:if(O){t.next=4;break}return t.abrupt("return",[]);case 4:return t.prev=4,t.next=7,O.request("GET /gists/".concat(x));case 7:return e=t.sent,n=e.data,r=n.files[g].content,t.abrupt("return",JSON.parse(r));case 13:return t.prev=13,t.t0=t.catch(4),401===t.t0.status&&k(),t.abrupt("return",[]);case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(c.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:if(O){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,C();case 6:if(n=t.sent,!!!n.find((function(t){return e.url===t.url||e.title===t.title}))){t.next=10;break}return t.abrupt("return",new Error("\u5b58\u5728\u76f8\u540c\u8ba2\u9605\u6e90\u94fe\u63a5\u6216\u8005\u6807\u9898"));case 10:return n.push(e),t.prev=11,t.next=14,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},g,{content:JSON.stringify(n)})});case 14:return t.abrupt("return",!0);case 17:return t.prev=17,t.t0=t.catch(11),t.abrupt("return",t.t0);case 20:case"end":return t.stop()}}),t,null,[[11,17]])})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(c.a)(a.a.mark((function t(e,n){var u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:if(O){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,C();case 6:if(u=t.sent,-1!==(c=u.findIndex((function(t){return n.url===t.url&&n.title===t.title})))){t.next=10;break}return t.abrupt("return",new Error("\u7f16\u8f91\u5931\u8d25\uff0c\u4e0d\u5b58\u5728\u8be5\u8ba2\u9605\u6e90!"));case 10:if(u.findIndex((function(t){return e.url===t.url||e.title===t.title}))===c){t.next=13;break}return t.abrupt("return",new Error("\u7f16\u8f91\u5931\u8d25\uff0c\u5df2\u5b58\u5728\u76f8\u540c\u8ba2\u9605\u6e90!"));case 13:return u[c]=e,t.prev=14,t.next=17,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},g,{content:JSON.stringify(u)})});case 17:return t.abrupt("return",!0);case 20:return t.prev=20,t.t0=t.catch(14),t.abrupt("return",t.t0);case 23:case"end":return t.stop()}}),t,null,[[14,20]])})));return function(e,n){return t.apply(this,arguments)}}(),A=function(){var t=Object(c.a)(a.a.mark((function t(e){var n,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:if(O){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,C();case 6:return n=t.sent,u=n.filter((function(t){return t&&t.url!==e})),t.prev=8,t.next=11,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},g,{content:JSON.stringify(u)})});case 11:return t.abrupt("return",!0);case 14:return t.prev=14,t.t0=t.catch(8),t.abrupt("return",t.t0);case 17:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(c.a)(a.a.mark((function t(e){var n,r,u,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.parseURL("https://cors.bridged.cc/"+e);case 2:return n=t.sent,r=n.items,u=n.title,c=n.description,i=r.map((function(t){return{title:t.title,date:t.pubDate,snippet:t.contentSnippet,link:t.link,content:t.content}})),console.log(r),t.abrupt("return",{list:i,title:u,description:c});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:if(O){t.next=4;break}return t.abrupt("return",!1);case 4:return t.prev=4,t.next=7,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},j,{content:JSON.stringify(e)})});case 7:return t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(4),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=Object(c.a)(a.a.mark((function t(){var e,n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:if(O){t.next=4;break}return t.abrupt("return",{saveLimit:10,updateTime:"14:00",updateCycle:1});case 4:return t.prev=4,t.next=7,O.request("GET /gists/".concat(x));case 7:return e=t.sent,n=e.data,r=n.files[j].content,t.abrupt("return",JSON.parse(r));case 13:return t.prev=13,t.t0=t.catch(4),t.abrupt("return",{saveLimit:10,updateTime:"14:00",updateCycle:1});case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(){return t.apply(this,arguments)}}()}},[[152,1,2]]]);
//# sourceMappingURL=main.4f9737f1.chunk.js.map