(this["webpackJsonpmini-feeder"]=this["webpackJsonpmini-feeder"]||[]).push([[0],{105:function(e,t){},107:function(e,t){},147:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"device",(function(){return m})),n.d(r,"feed",(function(){return x}));var u=n(26),a=n(14),c=n(15),i=n(0),s=n(60),o=n.n(s),p=n(84),f=n(89),l=n(22),d=[{component:Object(i.lazy)((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,212))})),routes:[{path:"/",component:Object(i.lazy)((function(){return Promise.all([n.e(6),n.e(5)]).then(n.bind(null,211))}))}]}],b=document.documentElement;function v(){var e=16,t=b.getBoundingClientRect().width,n="";return"mobile"===(n=t<768?"mobile":t>=768&&t<=1024?"pad":"pc")&&(e=b.getBoundingClientRect().width/375*10),b.setAttribute("data-device",n),b.style.fontSize=e+"px",{name:n,rem:e}}var h=n(59),m=Object(l.a)("device",Object(a.a)({},v()),(function(e,t){switch(t.type){case"change":return Object(a.a)(Object(a.a)({},e),{},{name:t.name})}})),x=Object(l.a)("feed",{url:""},(function(e,t){switch(t.type){case"select":return Object(a.a)(Object(a.a)({},e),{},{url:t.url})}})),g=(n(147),function(){var e=Object(l.b)("device"),t=Object(c.a)(e,2)[1],n=Object(i.useCallback)((function(){t(Object(a.a)({type:"change"},v()))}),[t]);return Object(i.useEffect)((function(){return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[n]),Object(u.jsx)(f.a,{children:Object(u.jsx)(i.Suspense,{fallback:null,children:Object(p.a)(d,{gists:h})})})});o.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))},59:function(e,t,n){"use strict";n.r(t),n.d(t,"goAuth",(function(){return k})),n.d(t,"getToken",(function(){return y})),n.d(t,"getRssSaved",(function(){return C})),n.d(t,"addRssSaved",(function(){return E})),n.d(t,"editRssSaved",(function(){return T})),n.d(t,"removeRss",(function(){return A})),n.d(t,"getRssDetail",(function(){return J})),n.d(t,"editSystemConfig",(function(){return R})),n.d(t,"getSystemConfig",(function(){return q}));var r=n(10),u=n(1),a=n.n(u),c=n(5),i=n(58),s=n(15),o=n(55),p=n.n(o),f={isAsync:!0,header:{"Content-Type":"json",Accept:"json"},timeout:1e4,withCredentials:!0,convert:function(e){try{return JSON.parse(e)}catch(t){return e}},autoAbort:!0};p.a.config(f);var l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=p()(e,t,n);return{send:function(e){return Object(c.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.send(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))()}}},d=n(85),b=n.n(d),v=function(e){var t={};return"?"===(e=e.trim())[0]&&(e=e.slice(1)),e.split("&").forEach((function(e){var n=e.split("="),r=Object(s.a)(n,2),u=r[0],a=r[1];u&&(t[u]=a)})),t}(window.location.search).code,h="19194338bc489f26c18e",m="239d0e85b37a96446738ab6957cdc60c55deb14c",x="b54d474913a4f2149b9f96099b39474d",g="rss.json",j="system.json",w=new b.a,O=null,k=function(){sessionStorage.removeItem("token"),window.location.href="https://github.com/login/oauth/authorize?client_id=".concat(h,"&redirect_uri=").concat("https://yuchenli923.github.io/mini-feeder/build","&scope=gist")};function y(){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=sessionStorage.getItem("token"))){e.next=4;break}return O=new i.a({auth:t}),e.abrupt("return",t);case 4:return e.next=6,l("/login/oauth/access_token","get",{query:{client_id:h,code:v,client_secret:m,scope:"gist"}}).send();case 6:return n=e.sent,(r=n.access_token)?(sessionStorage.setItem("token",r),O=new i.a({auth:t})):k(),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v||k();var C=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(O){e.next=4;break}return e.abrupt("return",[]);case 4:return e.prev=4,e.next=7,O.request("GET /gists/".concat(x));case 7:return t=e.sent,n=t.data,r=n.files[g].content,e.abrupt("return",JSON.parse(r));case 13:return e.prev=13,e.t0=e.catch(4),401===e.t0.status&&k(),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(O){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,C();case 6:if(n=e.sent,!!!n.find((function(e){return t.url===e.url||t.title===e.title}))){e.next=10;break}return e.abrupt("return",new Error("\u5b58\u5728\u76f8\u540c\u8ba2\u9605\u6e90\u94fe\u63a5\u6216\u8005\u6807\u9898"));case 10:return n.push(t),e.prev=11,e.next=14,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},g,{content:JSON.stringify(n)})});case 14:return e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(11),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var u,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(O){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,C();case 6:if(u=e.sent,-1!==(c=u.findIndex((function(e){return n.url===e.url&&n.title===e.title})))){e.next=10;break}return e.abrupt("return",new Error("\u7f16\u8f91\u5931\u8d25\uff0c\u4e0d\u5b58\u5728\u8be5\u8ba2\u9605\u6e90!"));case 10:if(u.findIndex((function(e){return t.url===e.url||t.title===e.title}))===c){e.next=13;break}return e.abrupt("return",new Error("\u7f16\u8f91\u5931\u8d25\uff0c\u5df2\u5b58\u5728\u76f8\u540c\u8ba2\u9605\u6e90!"));case 13:return u[c]=t,e.prev=14,e.next=17,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},g,{content:JSON.stringify(u)})});case 17:return e.abrupt("return",!0);case 20:return e.prev=20,e.t0=e.catch(14),e.abrupt("return",e.t0);case 23:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(O){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,C();case 6:return n=e.sent,u=n.filter((function(e){return e&&e.url!==t})),e.prev=8,e.next=11,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},g,{content:JSON.stringify(u)})});case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(8),e.abrupt("return",e.t0);case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,u,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.parseURL("https://cors.bridged.cc/"+t);case 2:return n=e.sent,r=n.items,u=n.title,c=n.description,i=r.map((function(e){return{title:e.title,date:e.pubDate,snippet:e.contentSnippet,link:e.link,content:e.content}})),console.log(r),e.abrupt("return",{list:i,title:u,description:c});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(O){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,O.request("PATCH /gists/".concat(x),{files:Object(r.a)({},j,{content:JSON.stringify(t)})});case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:if(O){e.next=4;break}return e.abrupt("return",{saveLimit:10,updateTime:"14:00",updateCycle:1});case 4:return e.prev=4,e.next=7,O.request("GET /gists/".concat(x));case 7:return t=e.sent,n=t.data,r=n.files[j].content,e.abrupt("return",JSON.parse(r));case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{saveLimit:10,updateTime:"14:00",updateCycle:1});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}()}},[[152,1,2]]]);
//# sourceMappingURL=main.c759bc3e.chunk.js.map